(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const t of a)if(t.type==="childList")for(const s of t.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function g(a){const t={};return a.integrity&&(t.integrity=a.integrity),a.referrerPolicy&&(t.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?t.credentials="include":a.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(a){if(a.ep)return;a.ep=!0;const t=g(a);fetch(a.href,t)}})();class p{constructor(e){this.remainingTime=e,this.timer=null,this.onTick=null,this.onTimeout=null}start(e,g){this.onTick=e,this.onTimeout=g,this.timer=setInterval(()=>{var i,a;this.remainingTime--,this.remainingTime<=0?(this.stop(),this.remainingTime=0,(i=this.onTimeout)==null||i.call(this)):(a=this.onTick)==null||a.call(this)},1e3)}stop(){this.timer&&(clearInterval(this.timer),this.timer=null)}reset(e){this.stop(),this.remainingTime=e}subtractTime(e){var g,i;this.remainingTime=Math.max(0,this.remainingTime-e),this.remainingTime===0?(this.stop(),(g=this.onTimeout)==null||g.call(this)):(i=this.onTick)==null||i.call(this)}isRunning(){return this.timer!==null}getRemainingTime(){return this.remainingTime}}function n(m){const e=Math.floor(m/60),g=m%60;return`${String(e).padStart(2,"0")}:${String(g).padStart(2,"0")}`}class r{constructor(e){this.settings=e,this.player1Clock=null,this.player2Clock=null,this.activePlayer=null,this.onTick=null,this.onTimeout=null,this.reset()}reset(){const e=this.settings.getTimeInSeconds();this.player1Clock=new p(e),this.player2Clock=new p(e),this.activePlayer=null,this.stop()}start(){this.activePlayer||(this.activePlayer=1),(this.activePlayer===1?this.player1Clock:this.player2Clock).start(()=>{var g;return(g=this.onTick)==null?void 0:g.call(this)},()=>{var g;return(g=this.onTimeout)==null?void 0:g.call(this,this.activePlayer)})}stop(){var e,g;(e=this.player1Clock)==null||e.stop(),(g=this.player2Clock)==null||g.stop()}switchPlayer(){this.stop(),this.activePlayer=this.activePlayer===1?2:1,this.start()}getFormattedTime(e){const g=e===1?this.player1Clock:this.player2Clock;return n(g.getRemainingTime())}setOnTick(e){this.onTick=e}setOnTimeout(e){this.onTimeout=e}get isRunning(){var e,g;return((e=this.player1Clock)==null?void 0:e.isRunning())||((g=this.player2Clock)==null?void 0:g.isRunning())}}class l{constructor(){this.elements=this.cacheElements(),this.preloadedImage=new Image}cacheElements(){return{player1:document.getElementById("player1"),player2:document.getElementById("player2"),pass1:document.getElementById("pass1"),pass2:document.getElementById("pass2"),startBtn:document.getElementById("startBtn"),resetBtn:document.getElementById("resetBtn"),settingsBtn:document.getElementById("settingsBtn"),settingsModal:document.getElementById("settingsModal"),saveSettings:document.getElementById("saveSettings"),cancelSettings:document.getElementById("cancelSettings"),timeInput:document.getElementById("timeInput"),slideshow:document.getElementById("slideshow"),categorySelect:document.getElementById("categorySelect")}}get(e){return this.elements[e]?this.elements[e]:(console.warn(`Element "${e}" not found in cached elements`),null)}updatePlayerTime(e,g){const i=this.elements[`player${e}`];if(i){const a=i.querySelector(".time");a&&(a.textContent=g)}}setStartButtonText(e){const g=this.elements.startBtn;g&&(g.textContent=e)}updatePlayerStatus(e,g){const i=this.elements.player1,a=this.elements.player2;i&&a&&(i.classList.remove("active","inactive"),a.classList.remove("active","inactive"),e?(i.classList.add("active"),a.classList.add("inactive")):g&&(i.classList.add("inactive"),a.classList.add("active")))}markTimeout(e){const g=this.elements[`player${e}`];g&&g.classList.add("timeout")}updateSlideshowImage(e,g){const i=this.elements.slideshow;if(i){if(g){i.style.opacity="0",setTimeout(()=>{i.src=e,i.style.opacity="1"},300);return}this.preloadedImage.onload=()=>{i.style.opacity="0",setTimeout(()=>{i.src=e,i.style.opacity="1"},300)},this.preloadedImage.src=e}}showSettingsModal(){const e=this.elements.settingsModal;e&&e.classList.remove("hidden")}hideSettingsModal(){const e=this.elements.settingsModal;e&&e.classList.add("hidden")}}const o={default:{path:"/images",images:["start.jpg"]},classic:{path:"/images/classic",images:["image31.jpg","image1.jpg","image2.jpg","image3.jpg","image4.jpg","image5.jpg","image6.jpg","image7.jpg","image8.jpg","image9.jpg","image10.jpg","image11.jpg","image12.jpg","image13.jpg","image14.jpg","image15.jpg","image16.jpg","image17.jpg","image18.jpg","image19.jpg","image20.jpg","image21.jpg","image22.jpg","image23.jpg","image24.jpg","image25.jpg","image26.jpg","image27.jpg","image28.jpg","image29.jpg","image30.jpg"]},modern:{path:"/images/drink",images:["image31.jpg","image1.jpg","image2.jpg","image3.jpg","image4.jpg","image22.jpg","image5.jpg","image6.jpg","image7.jpg","image8.jpg","image9.jpg","image11.jpg","image12.jpg","image13.jpg","image14.jpg","image15.jpg","image16.jpg","image17.jpg","image18.jpg","image19.jpg","image20.jpg","image21.jpg","image23.jpg"]},masters:{path:"/images/heroes",images:["image31.jpg","image1.jpg","image2.jpg","image3.jpg","image4.jpg","image5.jpg","image6.jpg","image7.jpg","image8.jpg","image9.jpg","image10.jpg","image11.jpg","image12.jpg","image13.jpg","image14.jpg","image15.jpg","image16.jpg","image17.jpg","image18.jpg","image19.jpg","image20.jpg","image21.jpg","image22.jpg","image23.jpg","image24.jpg","image25.jpg","image26.jpg","image27.jpg","image28.jpg","image29.jpg","image30.jpg"]},no5:{path:"/images/instruments",images:["image31.jpg","image1.jpg","image2.jpg","image3.jpg","image4.jpg","image5.jpg","image6.jpg","image7.jpg","image8.jpg","image9.jpg","image10.jpg","image11.jpg","image12.jpg","image13.jpg","image14.jpg","image15.jpg","image16.jpg","image17.jpg","image18.jpg","image19.jpg","image20.jpg","image21.jpg","image22.jpg","image23.jpg","image24.jpg","image25.jpg","image26.jpg"]},no6:{path:"/images/stars",images:["image31.jpg","image1.jpg","image2.jpg","image3.jpg","image4.jpg","image5.jpg","image6.jpg","image7.jpg","image8.jpg","image9.jpg","image10.jpg","image11.jpg","image12.jpg","image13.jpg","image14.jpg","image15.jpg","image16.jpg","image17.jpg","image18.jpg","image19.jpg","image20.jpg","image21.jpg","image22.jpg","image23.jpg","image24.jpg","image25.jpg","image26.jpg","image27.jpg","image28.jpg"]},no7:{path:"/images/videogames",images:["image31.jpg","image1.jpg","image2.jpg","image3.jpg","image4.jpg","image5.jpg","image6.jpg","image7.jpg","image8.jpg","image9.jpg","image10.jpg","image11.jpg","image12.jpg","image13.jpg","image14.jpg","image15.jpg","image16.jpg","image17.jpg","image18.jpg","image19.jpg","image20.jpg","image21.jpg","image22.jpg","image23.jpg","image24.jpg","image25.jpg","image26.jpg","image27.jpg","image28.jpg"]},no8:{path:"/images/cartoon",images:["image31.jpg","image1.jpg","image2.jpg","image3.jpg","image4.jpg","image5.jpg","image6.jpg","image7.jpg","image8.jpg","image9.jpg","image10.jpg","image11.jpg","image12.jpg","image13.jpg","image14.jpg","image15.jpg","image16.jpg","image17.jpg","image18.jpg","image19.jpg","image20.jpg","image21.jpg","image22.jpg","image23.jpg","image24.jpg","image25.jpg","image26.jpg","image27.jpg","image28.jpg"]},no9:{path:"/images/sports",images:["image31.jpg","image1.jpg","image2.jpg","image3.jpg","image4.jpg","image5.jpg","image6.jpg","image7.jpg","image8.jpg","image9.jpg","image10.jpg","image11.jpg","image12.jpg","image13.jpg","image14.jpg","image15.jpg","image16.jpg","image17.jpg","image18.jpg","image19.jpg","image20.jpg","image21.jpg","image22.jpg","image23.jpg","image24.jpg","image25.jpg","image26.jpg","image27.jpg","image28.jpg","image29.jpg","image30.jpg"]},no10:{path:"/images/capitals",images:["image31.jpg","image1.jpg","image2.jpg","image3.jpg","image4.jpg","image5.jpg","image6.jpg","image7.jpg","image8.jpg","image9.jpg","image10.jpg","image11.jpg","image12.jpg","image13.jpg","image14.jpg","image15.jpg","image16.jpg","image17.jpg","image18.jpg","image19.jpg","image20.jpg","image21.jpg","image22.jpg"]},no11:{path:"/images/body",images:["image31.jpg","image1.jpg","image2.jpg","image3.jpg","image4.jpg","image5.jpg","image6.jpg","image7.jpg","image8.jpg","image9.jpg","image10.jpg","image11.jpg","image12.jpg","image13.jpg","image14.jpg","image15.jpg","image16.jpg","image17.jpg","image18.jpg","image19.jpg","image20.jpg","image21.jpg","image22.jpg","image23.jpg","image24.jpg","image25.jpg","image26.jpg","image27.jpg","image28.jpg","image29.jpg","image30.jpg"]},no12:{path:"/images/nature",images:["image31.jpg","image1.jpg","image2.jpg","image3.jpg","image4.jpg","image5.jpg","image6.jpg","image7.jpg","image8.jpg","image9.jpg","image10.jpg","image11.jpg","image12.jpg","image13.jpg","image14.jpg","image15.jpg","image16.jpg","image17.jpg","image18.jpg","image19.jpg","image20.jpg","image21.jpg","image22.jpg","image23.jpg","image24.jpg","image25.jpg","image26.jpg","image27.jpg","image28.jpg"]},no13:{path:"/images/fruits",images:["image31.jpg","image1.jpg","image2.jpg","image3.jpg","image4.jpg","image5.jpg","image6.jpg","image7.jpg","image8.jpg","image9.jpg","image10.jpg","image11.jpg","image12.jpg","image13.jpg","image14.jpg","image15.jpg","image16.jpg","image17.jpg","image18.jpg","image19.jpg","image20.jpg","image21.jpg","image22.jpg","image23.jpg","image24.jpg","image25.jpg","image26.jpg","image27.jpg","image28.jpg","image29.jpg","image30.jpg"]},no14:{path:"/images/vehicles",images:["image31.jpg","image1.jpg","image2.jpg","image3.jpg","image4.jpg","image5.jpg","image6.jpg","image7.jpg","image8.jpg","image9.jpg","image10.jpg","image11.jpg","image12.jpg","image13.jpg","image14.jpg","image15.jpg","image16.jpg","image17.jpg","image18.jpg","image19.jpg","image20.jpg","image21.jpg","image22.jpg","image23.jpg","image24.jpg","image25.jpg","image26.jpg","image27.jpg","image28.jpg"]},no15:{path:"/images/flags",images:["image31.jpg","image1.jpg","image2.jpg","image3.jpg","image4.jpg","image5.jpg","image6.jpg","image7.jpg","image8.jpg","image9.jpg","image10.jpg","image11.jpg","image12.jpg","image13.jpg","image14.jpg","image15.jpg","image16.jpg","image17.jpg","image18.jpg","image19.jpg","image20.jpg","image21.jpg","image22.jpg","image23.jpg","image24.jpg","image25.jpg","image26.jpg","image27.jpg","image28.jpg","image29.jpg","image30.jpg"]},no16:{path:"/images/foods",images:["image31.jpg","image1.jpg","image2.jpg","image3.jpg","image4.jpg","image5.jpg","image6.jpg","image7.jpg","image8.jpg","image9.jpg","image10.jpg","image11.jpg","image12.jpg","image13.jpg","image14.jpg","image15.jpg","image16.jpg","image17.jpg","image18.jpg","image19.jpg","image20.jpg","image21.jpg","image22.jpg","image23.jpg","image24.jpg","image25.jpg","image26.jpg","image27.jpg","image28.jpg"]},no17:{path:"/images/vegetables",images:["image31.jpg","image1.jpg","image2.jpg","image3.jpg","image4.jpg","image5.jpg","image6.jpg","image7.jpg","image8.jpg","image9.jpg","image10.jpg","image11.jpg","image12.jpg","image13.jpg","image14.jpg","image15.jpg","image16.jpg","image17.jpg","image18.jpg","image19.jpg","image20.jpg","image21.jpg","image22.jpg","image23.jpg","image24.jpg","image25.jpg","image26.jpg","image27.jpg","image28.jpg","image29.jpg","image30.jpg"]}};class h{constructor(){this.preloadedImages=new Map,this.preloadQueue=[],this.currentCategory=null,this.preloadSize=2}setCategory(e,g){this.currentCategory=e,this.preloadedImages.clear(),this.preloadQueue=[],this.queueImagesForPreload(0,g)}queueImagesForPreload(e,g){this.preloadQueue=[];for(let i=0;i<this.preloadSize;i++){const a=(e+i)%g.length,t=g[a];this.preloadedImages.has(t)||this.preloadQueue.push(t)}this.preloadQueuedImages()}preloadQueuedImages(){this.preloadQueue.forEach(e=>{if(!this.preloadedImages.has(e)){const g=new Image;g.onload=()=>{this.preloadedImages.set(e,g)},g.src=e}})}getPreloadedImage(e){return this.preloadedImages.get(e)}updatePreloadQueue(e,g){this.currentCategory&&this.queueImagesForPreload(e+1,g)}}class c{constructor(){this.imagePreloader=new h,this.categories=this.initializeCategories(),this.currentCategory="default",this.currentIndex=0}initializeCategories(){return Object.entries(o).reduce((e,[g,i])=>(e[g]=i.images.map(a=>`${i.path}/${a}`),e),{})}setCategory(e){if(this.categories[e]){this.currentCategory=e,this.currentIndex=0;const g=this.categories[e];return this.imagePreloader.setCategory(e,g),this.getCurrentImage()}return null}next(){const e=this.categories[this.currentCategory];return this.currentIndex=(this.currentIndex+1)%e.length,this.imagePreloader.updatePreloadQueue(this.currentIndex,e),this.getCurrentImage()}getCurrentImage(){return this.categories[this.currentCategory][this.currentIndex]}getPreloadedImage(e){return this.imagePreloader.getPreloadedImage(e)}reset(){return this.currentIndex=0,this.getCurrentImage()}getCategories(){return Object.keys(this.categories)}}class d{constructor(e,g){this.timer=e,this.settings=g,this.elements=new l,this.slideshow=new c,this.setupEventListeners()}initialize(){this.updateDisplay(),this.timer.setOnTick(()=>this.updateDisplay()),this.timer.setOnTimeout(e=>this.handleTimeout(e)),this.updateSlideshow()}setupEventListeners(){this.addClickListener("startBtn",()=>this.handleStartClick()),this.addClickListener("resetBtn",()=>this.handleResetClick()),this.addClickListener("settingsBtn",()=>this.showSettings()),this.addClickListener("saveSettings",()=>this.saveSettings()),this.addClickListener("cancelSettings",()=>this.hideSettings()),this.addClickListener("player1",()=>this.handlePlayerClick(1)),this.addClickListener("player2",()=>this.handlePlayerClick(2)),this.addClickListener("pass1",g=>this.handlePassClick(g,1)),this.addClickListener("pass2",g=>this.handlePassClick(g,2));const e=this.elements.get("categorySelect");e&&e.addEventListener("change",g=>this.handleCategoryChange(g)),document.addEventListener("keydown",g=>{g.code==="Space"&&this.handleStartClick(),g.code==="KeyR"&&this.handleResetClick()})}addClickListener(e,g){const i=this.elements.get(e);i&&i.addEventListener("click",g)}async handleCategoryChange(e){const g=this.slideshow.setCategory(e.target.value);g&&await this.updateSlideshow(g)}handleStartClick(){this.timer.isRunning?(this.timer.stop(),this.elements.setStartButtonText("Start")):setTimeout(()=>{this.timer.start(),this.elements.setStartButtonText("Pause"),this.updateSlideshow(e)},5e3),this.updateDisplay();const e=this.slideshow.next()}async handleResetClick(){this.timer.reset(),this.elements.setStartButtonText("Start"),this.updateDisplay();const e=this.slideshow.reset();this.updateSlideshow(e)}async handlePlayerClick(e){if(this.timer.isRunning&&e===this.timer.activePlayer){this.timer.switchPlayer(),this.updateDisplay();const g=this.slideshow.next();await this.updateSlideshow(g)}}async handlePassClick(e,g){if(e.stopPropagation(),!this.timer.isRunning)return;(g===1?this.timer.player1Clock:this.timer.player2Clock).subtractTime(3),this.updateDisplay(),this.updateSlideshow()}handleTimeout(e){this.elements.markTimeout(e),this.elements.setStartButtonText("Start")}updateDisplay(){[1,2].forEach(e=>{this.elements.updatePlayerTime(e,this.timer.getFormattedTime(e))}),this.elements.updatePlayerStatus(this.timer.activePlayer===1&&this.timer.isRunning,this.timer.activePlayer===2&&this.timer.isRunning)}async updateSlideshow(e){if(this.elements.get("slideshow")&&e){const i=this.slideshow.getPreloadedImage(e);this.elements.updateSlideshowImage(e,i)}}showSettings(){const e=this.elements.get("timeInput");e&&(e.value=this.settings.getTimeInMinutes()),this.elements.showSettingsModal()}hideSettings(){this.elements.hideSettingsModal()}saveSettings(){const e=this.elements.get("timeInput");if(e){const g=parseInt(e.value,10);g>0&&(this.settings.setTimeInMinutes(g),this.timer.reset(),this.updateDisplay())}this.hideSettings()}}class u{constructor(){this.timeInMinutes=.75}setTimeInMinutes(e){this.timeInMinutes=e}getTimeInMinutes(){return this.timeInMinutes}getTimeInSeconds(){return this.timeInMinutes*60}}const j=new u,y=new r(j),I=new d(y,j);I.initialize();
